<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SDK æ˜“ç”¨æ€§</title>
</head>
<body>

<h1>SDK æ˜“ç”¨æ€§è®¾è®¡ <small>appKey: 8w7jv4qb78a9y; å½“å‰ç”¨æˆ·: user9</small></h1>
<div class="panel" id="panel">
	<p>
		<span>åˆå§‹åŒ–</span>
		<input type="button" onclick="init()" value="åˆå§‹åŒ–">
	</p>
	<p>
		<span>é“¾æ¥</span>
		<input type="button" onclick="connect()" value="é“¾æ¥">
	</p>
	<p>
		<span>è·å–æ¶ˆæ¯</span>
		<input type="button" onclick="receiveMessage()" value="è·å–æ¶ˆæ¯">  <a href="https://rongcloud.github.io/websdk-demo/api-test.html">å‘é€æ¶ˆæ¯é¡µé¢</a>
	</p>
	<p>
		<span>å‘é€æ¶ˆæ¯</span>
		<input type="button" onclick="sendMessage()" value="å‘é€æ¶ˆæ¯">
	</p>
</div>

<p></p>

<hr>

<div class="show" id="show1">
	<h3>æ¶ˆæ¯æ¥æ”¶ç»“æœ(æ–°æ¶ˆæ¯åœ¨æœ€ä¸‹)</h3>
	<pre id="r"></pre>
</div>


<script>
function showResult(info){
	var dom = document.getElementById("r");
	dom.innerHTML += "<br>" + JSON.stringify(info,null,"\t");
}	
</script>

<script src="//cdn.ronghub.com/RongIMLib-2.3.2.js"></script>
<script src="im.js"></script>
<script>
RongIMLib3.config = {
	appKey : "8w7jv4qb78a9y",
	token : "ZThhLI1Xa1BX5EMREAdArWSH6ouuI8NT/fNmMkzF+4IOKIoFvbsi6JnH8QmnSltLkCcsK8vOgKl3IZgfbxFiWg=="
}; 
showResult(statusDesc[status]);


function init(){
	RongIMLib3.init();
	showResult(statusDesc[status]);
}

function connect(){
	showResult(statusDesc[status]);
	RongIMLib3.connect({
		ready : function(currentUser){
			// showResult("connect ready");
			showResult(statusDesc[status]);
			showResult(currentUser);
		},
		receiveMessage : function(message){
			showResult("new message by listen");
			showResult(message);
		},
		tokenIncorrect : function(token){
			showResult("tokenIncorrect");
			showResult(token);
		},
		error : function(errorCode){
			showResult("connect error");
			showResult(errorCode);
		}
	});
}

function receiveMessage(){
	showResult(statusDesc[status]);
	showResult("new message listen");
	RongIMLib3.receiveMessage(function(message){
		showResult("new message by get");
		showResult(message);
	});
}

//only support textMessage
function sendMessage(){
	showResult(statusDesc[status]);
	var content = {
		content: [
			"é˜¿æ‹‰ä¼¯è¯­ï¼šØ§Ù„Ø´Ø±Ù‚ Ø§Ù„Ø£ÙˆØ³Ø· ",
			"å¸Œä¼¯æ¥è¯­ï¼š×”××–×¨×— ×”×ª×™×›×•×Ÿ",
			"emoji: ğŸ˜Š ",
			"å¸Œè…Šå­—æ¯ï¼š Ï€ï¼ŒÎ±ï¼ŒÎ², ",
			"æ•°å­—å•ä½éƒ¨åˆ†å­—ç¬¦ å¦‚ï¼šÃ— ",
			"æ‹‰ä¸æ–‡æ‰€æœ‰å­—ç¬¦ å¦‚ï¼šÎŸ Î¡ Ïƒ Ã Ã† ",
			"æ‹¼éŸ³æ‰€æœ‰å­—ç¬¦ å¦‚ï¼š Ä› Ã¬ Åˆ ",
			"è‹±æ–‡éŸ³æ ‡éƒ¨åˆ†å­—ç¬¦ å¦‚ ï¼š É™ Êƒ ",
			"ä¿„æ–‡éƒ¨åˆ†å­—ç¬¦ å¦‚ ï¼šÑˆ ; âŠ‡ Ã¢ Å’ Å  â„¢ "
		].join(",")
	};

	var targetId = "user11";
	var conversationType = RongIMLib.ConversationType.PRIVATE; // ç§èŠ
	RongIMLib3.sendMessage(conversationType, targetId, content, {
        onSuccess: function (message) {
			showResult(statusDesc[status]);
            showResult("å‘é€æ–‡å­—æ¶ˆæ¯ æˆåŠŸ");
            showResult(message);
        },
        onError: function (errorCode,message) {
            showResult("å‘é€æ–‡å­—æ¶ˆæ¯ å¤±è´¥");
            showResult(message);
        }
    });
}
</script>


</body>
</html>